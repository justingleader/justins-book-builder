% Quarto Templates Framework - LaTeX Template
% Version: 1.0.0
% Date: 2025-04-10

\documentclass[$if(fontsize)$$fontsize$,$endif$$if(papersize)$$papersize$,$endif$$for(classoption)$$classoption$$sep$,$endfor$]{$documentclass$}

% Load required packages
\usepackage{xcolor}
\usepackage{graphicx}
\usepackage{fontspec}
\usepackage{titlesec}
\usepackage{tcolorbox}
\usepackage{enumitem}
\usepackage{hyperref}
\usepackage{fancyhdr}
\usepackage[bottom]{footmisc}
\usepackage{mdframed}
\usepackage{lipsum}
\usepackage{setspace}
\usepackage{geometry}

% Set page geometry
\geometry{
  top=1in,
  bottom=1in,
  left=1in,
  right=1in,
  includehead,
  includefoot
}

% Define brand colors
\definecolor{primaryBlue}{HTML}{2a368e}
\definecolor{secondaryBlue}{HTML}{25457E}
\definecolor{primaryOrange}{HTML}{EB7527}
\definecolor{lightGray}{HTML}{c8c8c8}
\definecolor{mediumGray}{HTML}{8C9BA5}
\definecolor{darkGray}{HTML}{899DA6}
\definecolor{lightBackground}{HTML}{F5F5F5}
\definecolor{primaryText}{HTML}{000000}
\definecolor{secondaryText}{HTML}{333333}

% Set link colors
\hypersetup{
  colorlinks=true,
  linkcolor=primaryBlue,
  filecolor=primaryBlue,
  citecolor=primaryBlue,
  urlcolor=primaryBlue
}

% Configure fonts
\defaultfontfeatures{Ligatures=TeX}
\setmainfont{Helvetica Neue}[
  BoldFont={Helvetica Neue Bold},
  ItalicFont={Helvetica Neue Italic},
  BoldItalicFont={Helvetica Neue Bold Italic}
]
\setmonofont{Courier New}[
  BoldFont={Courier New Bold},
  ItalicFont={Courier New Italic},
  BoldItalicFont={Courier New Bold Italic}
]

% Line spacing
\setstretch{1.5}

% Configure fancy headers
\pagestyle{fancy}
\fancyhf{}
\renewcommand{\headrulewidth}{0.4pt}
\renewcommand{\footrulewidth}{0.4pt}
\fancyhead[L]{\textcolor{primaryBlue}{\sffamily\leftmark}}
\fancyhead[R]{\textcolor{primaryBlue}{\sffamily STACK INTELLIGENCE}}
\fancyfoot[C]{\thepage}

% Custom heading styles
\titleformat{\chapter}
  {\normalfont\huge\bfseries\color{primaryBlue}}
  {\thechapter}{1em}{}[\vspace{1ex}{\color{primaryOrange}\titlerule[1.5pt]}]

\titleformat{\section}
  {\normalfont\LARGE\bfseries\color{primaryBlue}}
  {\thesection}{1em}{}

\titleformat{\subsection}
  {\normalfont\Large\bfseries\color{primaryBlue}}
  {\thesubsection}{1em}{}

\titleformat{\subsubsection}
  {\normalfont\large\bfseries\color{secondaryText}}
  {\thesubsubsection}{1em}{}

% Custom environments for callouts
\definecolor{successcolor}{HTML}{28a745}
\definecolor{infocolor}{HTML}{17a2b8}
\definecolor{warningcolor}{HTML}{ffc107}
\definecolor{dangercolor}{HTML}{dc3545}

% Featured Quote environment
\newenvironment{featuredquote}[1][Featured Quote]{%
  \begin{tcolorbox}[
    enhanced,
    breakable,
    colback=lightBackground,
    colframe=primaryBlue,
    fonttitle=\bfseries\color{white},
    coltitle=white,
    title=#1,
    boxrule=0pt,
    leftrule=2pt,
    rightrule=0pt,
    toprule=0pt,
    bottomrule=0pt,
    arc=0pt,
    left=15pt,
    right=15pt,
    top=15pt,
    bottom=15pt
  ]
  \begin{quote}
  \itshape\large
}{%
  \end{quote}
  \end{tcolorbox}
}

% Executive Guide environment
\newenvironment{executiveguide}[1][STACK INTELLIGENCE EXECUTIVE GUIDE]{%
  \begin{tcolorbox}[
    enhanced,
    breakable,
    colback=lightBackground!50!white,
    colframe=primaryOrange,
    fonttitle=\bfseries\color{white},
    coltitle=white,
    title=#1,
    boxrule=0pt,
    leftrule=2pt,
    rightrule=0pt,
    toprule=0pt,
    bottomrule=0pt,
    arc=0pt,
    left=15pt,
    right=15pt,
    top=15pt,
    bottom=15pt
  ]
}{%
  \end{tcolorbox}
}

% Standard callout environments
\newenvironment{statsblock}[1]{%
  \begin{tcolorbox}[
    enhanced,
    breakable,
    colback=primaryBlue!5,
    colframe=primaryBlue,
    fonttitle=\bfseries\color{white},
    coltitle=white,
    title=#1,
    boxrule=0.5pt,
    left=15pt,
    right=15pt,
    top=15pt,
    bottom=15pt
  ]
}{%
  \end{tcolorbox}
}

\newenvironment{successstory}[1]{%
  \begin{tcolorbox}[
    enhanced,
    breakable,
    colback=successcolor!5,
    colframe=successcolor,
    fonttitle=\bfseries\color{white},
    coltitle=white,
    title=#1,
    boxrule=0.5pt,
    left=15pt,
    right=15pt,
    top=15pt,
    bottom=15pt
  ]
}{%
  \end{tcolorbox}
}

\newenvironment{tipcallout}[1]{%
  \begin{tcolorbox}[
    enhanced,
    breakable,
    colback=primaryOrange!5,
    colframe=primaryOrange,
    fonttitle=\bfseries\color{white},
    coltitle=white,
    title=#1,
    boxrule=0.5pt,
    left=15pt,
    right=15pt,
    top=15pt,
    bottom=15pt
  ]
}{%
  \end{tcolorbox}
}

\newenvironment{notecallout}[1]{%
  \begin{tcolorbox}[
    enhanced,
    breakable,
    colback=infocolor!5,
    colframe=infocolor,
    fonttitle=\bfseries\color{white},
    coltitle=white,
    title=#1,
    boxrule=0.5pt,
    left=15pt,
    right=15pt,
    top=15pt,
    bottom=15pt
  ]
}{%
  \end{tcolorbox}
}

% Custom title page
\renewcommand{\maketitle}{%
  \begin{titlepage}
    \centering
    \vspace*{2cm}
    
    % Logo
    \includegraphics[width=0.6\textwidth]{/Users/jgrantl/Downloads/development/quarto_book_builder/projects/salesforce-ecommerce/brand-assets/images/Stack Intelligence With Logo.png}\\[3cm]
    
    % Title
    {\Huge\bfseries\color{primaryBlue} $title$\par}
    \vspace{1cm}
    
    % Subtitle if available
    $if(subtitle)$
    {\Large\color{secondaryText} $subtitle$\par}
    \vspace{1cm}
    $endif$
    
    % Authors
    $if(author)$
    {\large\color{secondaryText}
      $for(author)$
        $author$$sep$\\
      $endfor$
    \par}
    \vspace{0.5cm}
    $endif$
    
    % Publisher and date
    $if(publisher)$
    {\large\color{secondaryText} $publisher$\par}
    $endif$
    
    $if(date)$
    {\large\color{secondaryText} $date$\par}
    $endif$
    
    \vfill
    
    % Orange bottom bar
    \colorbox{primaryOrange}{\makebox[\textwidth][c]{\textcolor{white}{\large\bfseries Executive Guide}}}
  \end{titlepage}
}

% Include any user-specified header includes
$for(header-includes)$
$header-includes$
$endfor$

\begin{document}

% Title page
$if(title)$
\maketitle
$endif$

$if(abstract)$
\begin{abstract}
$abstract$
\end{abstract}
$endif$

$for(include-before)$
$include-before$
$endfor$

% Table of contents with custom styling
$if(toc)$
{
  \hypersetup{linkcolor=primaryBlue}
  \setcounter{tocdepth}{3}
  \tableofcontents
}
$endif$

$if(lot)$
\listoftables
$endif$

$if(lof)$
\listoffigures
$endif$

$body$

$for(include-after)$
$include-after$
$endfor$

\end{document}